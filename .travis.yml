language: ruby
rvm: 2.2
env:
 global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
cache: bundler
before_install:
 - gem update --system
install:
 - bundle install https://rubygems.org/ jekyll
 - bundle install https://rubygems.org/ html-proofer
 - bundle install https://rubygems.org/ jekyll_version_plugin
 - bundle install https://rubygems.org/ git
 - bundle install https://rubygems.org/ rubyzip
script: 
 - ./script/cibuild.sh
# whitelist
branches:
 only:
 - master
 - develop
deploy:
  provider: s3
  access_key_id: AKIAJXW2OUXQMW3DE7PA
  secret_access_key:
    secure: $AWS_ACCESSKEY
  bucket: f5-openstack-dev
  skip_cleanup: true 
  acl: authenticated_read
  local_dir: "site_build"
  on:
    repo: $TRAVIS_REPO_SLUG
    branch: $TRAVIS_BRANCH
